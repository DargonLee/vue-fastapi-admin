var Te=(e,s,h)=>new Promise((v,d)=>{var g=T=>{try{w(h.next(T))}catch(_){d(_)}},C=T=>{try{w(h.throw(T))}catch(_){d(_)}},w=T=>T.done?v(T.value):Promise.resolve(T.value).then(g,C);w((h=h.apply(e,s)).next())});import{_ as St}from"./CommonPage-1b7131ea.js";import{u as Rt,_ as It,N as Ct}from"./useCRUD-32249973.js";import{u as Tt,b as _t,c as Ft,F as Nt,a as we,_ as Vt}from"./CrudTable-1b72018f.js";import{d as Qe,h as p,ao as mt,ap as ft,aq as Mt,ar as Bt,as as Ot,at as Pt,au as Kt,c as ht,a as xe,u as vt,g as Me,H as pt,x,J as Ne,K as Ve,y as ie,av as Ut,l as At,e as O,aw as Dt,m as We,ax as nt,v as Ge,N as it,ay as at,Q as V,P as Et,k as lt,az as Lt,aA as zt,L as $t,j as jt,aB as Je,aC as Ht,aD as qt,aE as Wt,aF as Gt,aG as Jt,a6 as ke,aH as Xt,aI as Qt,aJ as Yt,aK as Zt,aL as en,Z as Q,a4 as ye,a1 as k,$ as I,a2 as l,a7 as Xe,M as tn,a5 as nn,aM as an,a0 as gt,X as ln,a8 as ae,Y as on,_ as $e,A as _e,an as rn,aN as dn,aO as un,ab as je}from"./index-1319d715.js";import{u as bt,N as se}from"./Input-80da2416.js";import{c as sn,t as cn,u as mn,N as fn,a as hn}from"./Tree-af06686b.js";import{A as vn}from"./Add-d3888378.js";import{N as Fe}from"./Switch-210aff7b.js";import{N as pn,a as H}from"./FormItem-a3720c19.js";import"./AppPage-2c648aa5.js";const gn=Qe({name:"Remove",render(){return p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},p("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),bn=e=>{const{textColorDisabled:s}=e;return{iconColorDisabled:s}},yn=mt({name:"InputNumber",common:ft,peers:{Button:Mt,Input:Bt},self:bn}),kn=yn,wn=e=>{const{popoverColor:s,boxShadow2:h,borderRadius:v,heightMedium:d,dividerColor:g,textColor2:C}=e;return{menuPadding:"4px",menuColor:s,menuBoxShadow:h,menuBorderRadius:v,menuHeight:`calc(${d} * 7.6)`,actionDividerColor:g,actionTextColor:C,actionPadding:"8px 12px"}},xn=mt({name:"TreeSelect",common:ft,peers:{Tree:Ot,Empty:Pt,InternalSelection:Kt},self:wn}),Sn=xn;function Rn(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function In(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function He(e){return e==null?!0:!Number.isNaN(e)}function ot(e,s){return e==null?"":s===void 0?String(e):e.toFixed(s)}function qe(e){if(e===null)return null;if(typeof e=="number")return e;{const s=Number(e);return Number.isNaN(s)?null:s}}const Cn=ht([xe("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),xe("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),rt=800,dt=100,Tn=Object.assign(Object.assign({},Me.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),_n=Qe({name:"InputNumber",props:Tn,setup(e){const{mergedBorderedRef:s,mergedClsPrefixRef:h,mergedRtlRef:v}=vt(e),d=Me("InputNumber","-input-number",Cn,kn,e,h),{localeRef:g}=bt("InputNumber"),C=pt(e),{mergedSizeRef:w,mergedDisabledRef:T,mergedStatusRef:_}=C,F=x(null),Y=x(null),le=x(null),b=x(e.defaultValue),ce=Ne(e,"value"),N=Ve(ce,b),M=x(""),Z=n=>{const o=String(n).split(".")[1];return o?o.length:0},U=n=>{const o=[e.min,e.max,e.step,n].map(f=>f===void 0?0:Z(f));return Math.max(...o)},oe=ie(()=>{const{placeholder:n}=e;return n!==void 0?n:g.value.placeholder}),q=ie(()=>{const n=qe(e.step);return n!==null?n===0?1:Math.abs(n):1}),B=ie(()=>{const n=qe(e.min);return n!==null?n:null}),a=ie(()=>{const n=qe(e.max);return n!==null?n:null}),m=n=>{const{value:o}=N;if(n===o){A();return}const{"onUpdate:value":f,onUpdateValue:S,onChange:K}=e,{nTriggerFormInput:D,nTriggerFormChange:X}=C;K&&V(K,n),S&&V(S,n),f&&V(f,n),b.value=n,D(),X()},r=({offset:n,doUpdateIfValid:o,fixPrecision:f,isInputing:S})=>{const{value:K}=M;if(S&&In(K))return!1;const D=(e.parse||Rn)(K);if(D===null)return o&&m(null),null;if(He(D)){const X=Z(D),{precision:ne}=e;if(ne!==void 0&&ne<X&&!f)return!1;let E=parseFloat((D+n).toFixed(ne!=null?ne:U(D)));if(He(E)){const{value:ge}=a,{value:be}=B;if(ge!==null&&E>ge){if(!o||S)return!1;E=ge}if(be!==null&&E<be){if(!o||S)return!1;E=be}return e.validator&&!e.validator(E)?!1:(o&&m(E),E)}}return!1},A=()=>{const{value:n}=N;if(He(n)){const{format:o,precision:f}=e;o?M.value=o(n):n===null||f===void 0||Z(n)>f?M.value=ot(n,void 0):M.value=ot(n,f)}else M.value=String(n)};A();const Se=ie(()=>r({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),W=ie(()=>{const{value:n}=N;if(e.validator&&n===null)return!1;const{value:o}=q;return r({offset:-o,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),re=ie(()=>{const{value:n}=N;if(e.validator&&n===null)return!1;const{value:o}=q;return r({offset:+o,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Be(n){const{onFocus:o}=e,{nTriggerFormFocus:f}=C;o&&V(o,n),f()}function Oe(n){var o,f;if(n.target===((o=F.value)===null||o===void 0?void 0:o.wrapperElRef))return;const S=r({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(S!==!1){const X=(f=F.value)===null||f===void 0?void 0:f.inputElRef;X&&(X.value=String(S||"")),N.value===S&&A()}else A();const{onBlur:K}=e,{nTriggerFormBlur:D}=C;K&&V(K,n),D(),Et(()=>{A()})}function ee(n){const{onClear:o}=e;o&&V(o,n)}function me(){const{value:n}=re;if(!n){ve();return}const{value:o}=N;if(o===null)e.validator||m(Ie());else{const{value:f}=q;r({offset:f,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function fe(){const{value:n}=W;if(!n){he();return}const{value:o}=N;if(o===null)e.validator||m(Ie());else{const{value:f}=q;r({offset:-f,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Re=Be,Pe=Oe;function Ie(){if(e.validator)return null;const{value:n}=B,{value:o}=a;return n!==null?Math.max(0,n):o!==null?Math.min(0,o):0}function Ke(n){ee(n),m(null)}function de(n){var o,f,S;!((o=le.value)===null||o===void 0)&&o.$el.contains(n.target)&&n.preventDefault(),!((f=Y.value)===null||f===void 0)&&f.$el.contains(n.target)&&n.preventDefault(),(S=F.value)===null||S===void 0||S.activate()}let G=null,J=null,P=null;function he(){P&&(window.clearTimeout(P),P=null),G&&(window.clearInterval(G),G=null)}function ve(){te&&(window.clearTimeout(te),te=null),J&&(window.clearInterval(J),J=null)}function Ce(){he(),P=window.setTimeout(()=>{G=window.setInterval(()=>{fe()},dt)},rt),nt("mouseup",document,he,{once:!0})}let te=null;function z(){ve(),te=window.setTimeout(()=>{J=window.setInterval(()=>{me()},dt)},rt),nt("mouseup",document,ve,{once:!0})}const pe=()=>{J||me()},Ue=()=>{G||fe()};function Ae(n){var o,f;if(n.key==="Enter"){if(n.target===((o=F.value)===null||o===void 0?void 0:o.wrapperElRef))return;r({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((f=F.value)===null||f===void 0||f.deactivate())}else if(n.key==="ArrowUp"){if(!re.value||e.keyboard.ArrowUp===!1)return;n.preventDefault(),r({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&me()}else if(n.key==="ArrowDown"){if(!W.value||e.keyboard.ArrowDown===!1)return;n.preventDefault(),r({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&fe()}}function De(n){M.value=n,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&r({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}Ut(N,()=>{A()});const j={focus:()=>{var n;return(n=F.value)===null||n===void 0?void 0:n.focus()},blur:()=>{var n;return(n=F.value)===null||n===void 0?void 0:n.blur()}},Ee=At("InputNumber",v,h);return Object.assign(Object.assign({},j),{rtlEnabled:Ee,inputInstRef:F,minusButtonInstRef:Y,addButtonInstRef:le,mergedClsPrefix:h,mergedBordered:s,uncontrolledValue:b,mergedValue:N,mergedPlaceholder:oe,displayedValueInvalid:Se,mergedSize:w,mergedDisabled:T,displayedValue:M,addable:re,minusable:W,mergedStatus:_,handleFocus:Re,handleBlur:Pe,handleClear:Ke,handleMouseDown:de,handleAddClick:pe,handleMinusClick:Ue,handleAddMousedown:z,handleMinusMousedown:Ce,handleKeyDown:Ae,handleUpdateDisplayedValue:De,mergedTheme:d,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:O(()=>{const{self:{iconColorDisabled:n}}=d.value,[o,f,S,K]=Dt(n);return{textColorTextDisabled:`rgb(${o}, ${f}, ${S})`,opacityDisabled:`${K}`}})})},render(){const{mergedClsPrefix:e,$slots:s}=this,h=()=>p(at,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Ge(s["minus-icon"],()=>[p(it,{clsPrefix:e},{default:()=>p(gn,null)})])}),v=()=>p(at,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Ge(s["add-icon"],()=>[p(it,{clsPrefix:e},{default:()=>p(vn,null)})])});return p("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},p(se,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var d;return this.showButton&&this.buttonPlacement==="both"?[h(),We(s.prefix,g=>g?p("span",{class:`${e}-input-number-prefix`},g):null)]:(d=s.prefix)===null||d===void 0?void 0:d.call(s)},suffix:()=>{var d;return this.showButton?[We(s.suffix,g=>g?p("span",{class:`${e}-input-number-suffix`},g):null),this.buttonPlacement==="right"?h():null,v()]:(d=s.suffix)===null||d===void 0?void 0:d.call(s)}}))}});function ut(e,s){const{rawNode:h}=e;return Object.assign(Object.assign({},h),{label:h[s],value:e.key})}function st(e,s,h,v){const{rawNode:d}=e;return Object.assign(Object.assign({},d),{value:e.key,label:s.map(g=>g.rawNode[v]).join(h)})}const Fn=ht([xe("tree-select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),xe("tree-select-menu",`
 position: relative;
 overflow: hidden;
 margin: 4px 0;
 transition: box-shadow .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-menu-border-radius);
 box-shadow: var(--n-menu-box-shadow);
 background-color: var(--n-menu-color);
 outline: none;
 `,[xe("tree","max-height: var(--n-menu-height);"),lt("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),lt("action",`
 padding: var(--n-action-padding);
 transition: 
 color .3s var(--n-bezier);
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),Lt()])]),Nn=Object.assign(Object.assign(Object.assign(Object.assign({},Me.props),{bordered:{type:Boolean,default:!0},cascade:Boolean,checkable:Boolean,clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},consistentMenuWidth:{type:Boolean,default:!0},defaultShow:Boolean,defaultValue:{type:[String,Number,Array],default:null},disabled:{type:Boolean,default:void 0},filterable:Boolean,checkStrategy:{type:String,default:"all"},loading:Boolean,maxTagCount:[String,Number],multiple:Boolean,showPath:Boolean,separator:{type:String,default:" / "},options:{type:Array,default:()=>[]},placeholder:String,placement:{type:String,default:"bottom-start"},show:{type:Boolean,default:void 0},size:String,value:[String,Number,Array],to:Je.propTo,menuProps:Object,virtualScroll:{type:Boolean,default:!0},status:String,renderTag:Function}),hn),{renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,onBlur:Function,onFocus:Function,onLoad:Function,onUpdateShow:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],"onUpdate:show":[Function,Array],leafOnly:Boolean}),Vn=Qe({name:"TreeSelect",props:Nn,setup(e){const s=x(null),h=x(null),v=x(null),d=x(null),{mergedClsPrefixRef:g,namespaceRef:C,inlineThemeDisabled:w}=vt(e),{localeRef:T}=bt("Select"),{mergedSizeRef:_,mergedDisabledRef:F,mergedStatusRef:Y,nTriggerFormBlur:le,nTriggerFormChange:b,nTriggerFormFocus:ce,nTriggerFormInput:N}=pt(e),M=x(e.defaultValue),Z=Ne(e,"value"),U=Ve(Z,M),oe=x(e.defaultShow),q=Ne(e,"show"),B=Ve(q,oe),a=x(""),m=O(()=>{const{filter:t}=e;if(t)return t;const{labelField:i}=e;return(c,u)=>c.length?u[i].toLowerCase().includes(c.toLowerCase()):!0}),r=O(()=>zt(e.options,sn(e.keyField,e.childrenField,e.disabledField,void 0))),{value:A}=U,Se=x(e.checkable?null:Array.isArray(A)&&A.length?A[A.length-1]:null),W=O(()=>e.multiple&&e.cascade&&e.checkable),re=x(e.defaultExpandAll?void 0:e.defaultExpandedKeys||e.expandedKeys),Be=Ne(e,"expandedKeys"),Oe=Ve(Be,re),ee=x(!1),me=O(()=>{const{placeholder:t}=e;return t!==void 0?t:T.value.placeholder}),fe=O(()=>e.checkable?[]:Re.value),Re=O(()=>{const{value:t}=U;return e.multiple?Array.isArray(t)?t:[]:t===null||Array.isArray(t)?[]:[t]}),Pe=O(()=>{const{multiple:t,showPath:i,separator:c,labelField:u}=e;if(t)return null;const{value:y}=U;if(!Array.isArray(y)&&y!==null){const{value:R}=r,$=R.getNode(y);if($!==null)return i?st($,R.getPath(y).treeNodePath,c,u):ut($,u)}return null}),Ie=O(()=>{const{multiple:t,showPath:i,separator:c}=e;if(!t)return null;const{value:u}=U;if(Array.isArray(u)){const y=[],{value:R}=r,{checkedKeys:$}=R.getCheckedKeys(u,{checkStrategy:e.checkStrategy,cascade:W.value,allowNotLoaded:e.allowCheckingNotLoaded}),{labelField:L}=e;return $.forEach(tt=>{const ze=R.getNode(tt);ze!==null&&y.push(i?st(ze,R.getPath(tt).treeNodePath,c,L):ut(ze,L))}),y}return[]}),Ke=O(()=>{const{self:{menuPadding:t}}=Le.value;return t});function de(){var t;(t=h.value)===null||t===void 0||t.focus()}function G(){var t;(t=h.value)===null||t===void 0||t.focusInput()}function J(t){const{onUpdateShow:i,"onUpdate:show":c}=e;i&&V(i,t),c&&V(c,t),oe.value=t}function P(t,i,c){const{onUpdateValue:u,"onUpdate:value":y}=e;u&&V(u,t,i,c),y&&V(y,t,i,c),M.value=t,N(),b()}function he(t,i){const{onUpdateIndeterminateKeys:c,"onUpdate:indeterminateKeys":u}=e;c&&V(c,t,i),u&&V(u,t,i)}function ve(t,i,c){const{onUpdateExpandedKeys:u,"onUpdate:expandedKeys":y}=e;u&&V(u,t,i,c),y&&V(y,t,i,c),re.value=t}function Ce(t){const{onFocus:i}=e;i&&i(t),ce()}function te(t){z();const{onBlur:i}=e;i&&i(t),le()}function z(){J(!1)}function pe(){F.value||(a.value="",J(!0),e.filterable&&G())}function Ue(){a.value=""}function Ae(t){var i;B.value&&(!((i=h.value)===null||i===void 0)&&i.$el.contains(Qt(t))||z())}function De(){F.value||(B.value?e.filterable||z():pe())}function j(t){const{value:{getNode:i}}=r;return t.map(c=>{var u;return((u=i(c))===null||u===void 0?void 0:u.rawNode)||null})}function Ee(t,i,c){const u=j(t),y=c.action==="check"?"select":"unselect",R=c.node;e.multiple?(P(t,u,{node:R,action:y}),e.filterable&&(G(),e.clearFilterAfterSelect&&(a.value=""))):(t.length?P(t[0],u[0]||null,{node:R,action:y}):P(null,null,{node:R,action:y}),z(),de())}function n(t){e.checkable&&he(t,j(t))}function o(t){var i;!((i=d.value)===null||i===void 0)&&i.contains(t.relatedTarget)||(ee.value=!0,Ce(t))}function f(t){var i;!((i=d.value)===null||i===void 0)&&i.contains(t.relatedTarget)||(ee.value=!1,te(t))}function S(t){var i,c,u;!((i=d.value)===null||i===void 0)&&i.contains(t.relatedTarget)||!((u=(c=h.value)===null||c===void 0?void 0:c.$el)===null||u===void 0)&&u.contains(t.relatedTarget)||(ee.value=!0,Ce(t))}function K(t){var i,c,u;!((i=d.value)===null||i===void 0)&&i.contains(t.relatedTarget)||!((u=(c=h.value)===null||c===void 0?void 0:c.$el)===null||u===void 0)&&u.contains(t.relatedTarget)||(ee.value=!1,te(t))}function D(t){t.stopPropagation();const{multiple:i}=e;!i&&e.filterable&&z(),i?P([],[],{node:null,action:"clear"}):P(null,null,{node:null,action:"clear"})}function X(t){const{value:i}=U;if(Array.isArray(i)){const{value:c}=r,{checkedKeys:u}=c.getCheckedKeys(i,{cascade:W.value,allowNotLoaded:e.allowCheckingNotLoaded}),y=u.findIndex(R=>R===t.value);if(~y){const R=u[y],$=j([R])[0];if(e.checkable){const{checkedKeys:L}=c.uncheck(t.value,u,{checkStrategy:e.checkStrategy,cascade:W.value,allowNotLoaded:e.allowCheckingNotLoaded});P(L,j(L),{node:$,action:"delete"})}else{const L=Array.from(u);L.splice(y,1),P(L,j(L),{node:$,action:"delete"})}}}}function ne(t){const{value:i}=t.target;a.value=i}function E(t){const{value:i}=v;i&&i.handleKeydown(t)}function ge(t){t.key==="Enter"?(B.value?(E(t),e.multiple||(z(),de())):pe(),t.preventDefault()):t.key==="Escape"?B.value&&(Yt(t),z(),de()):B.value?E(t):t.key==="ArrowDown"&&pe()}function be(){z(),de()}function yt(t){Zt(t,"action")||t.preventDefault()}const kt=O(()=>{const{renderTag:t}=e;if(t)return function({option:c,handleClose:u}){const{value:y}=c;if(y!==void 0){const R=r.value.getNode(y);if(R)return t({option:R.rawNode,handleClose:u})}return y}});$t(cn,{pendingNodeKeyRef:Se,dataTreeMate:r});function Ye(){var t;B.value&&((t=s.value)===null||t===void 0||t.syncPosition())}Tt(d,Ye);const wt=mn(e),Ze=O(()=>{if(e.checkable){const t=U.value;return e.multiple&&Array.isArray(t)?r.value.getCheckedKeys(t,{cascade:e.cascade,checkStrategy:wt.value,allowNotLoaded:e.allowCheckingNotLoaded}):{checkedKeys:Array.isArray(t)||t===null?[]:[t],indeterminateKeys:[]}}return{checkedKeys:[],indeterminateKeys:[]}}),xt={getCheckedData:()=>{const{checkedKeys:t}=Ze.value;return{keys:t,options:j(t)}},getIndeterminateData:()=>{const{indeterminateKeys:t}=Ze.value;return{keys:t,options:j(t)}},focus:()=>{var t;return(t=h.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=h.value)===null||t===void 0?void 0:t.blur()}},Le=Me("TreeSelect","-tree-select",Fn,Sn,e,g),et=O(()=>{const{common:{cubicBezierEaseInOut:t},self:{menuBoxShadow:i,menuBorderRadius:c,menuColor:u,menuHeight:y,actionPadding:R,actionDividerColor:$,actionTextColor:L}}=Le.value;return{"--n-menu-box-shadow":i,"--n-menu-border-radius":c,"--n-menu-color":u,"--n-menu-height":y,"--n-bezier":t,"--n-action-padding":R,"--n-action-text-color":L,"--n-action-divider-color":$}}),ue=w?jt("tree-select",void 0,et,e):void 0;return Object.assign(Object.assign({},xt),{menuElRef:d,mergedStatus:Y,triggerInstRef:h,followerInstRef:s,treeInstRef:v,mergedClsPrefix:g,mergedValue:U,mergedShow:B,namespace:C,adjustedTo:Je(e),isMounted:Ht(),focused:ee,menuPadding:Ke,mergedPlaceholder:me,mergedExpandedKeys:Oe,treeSelectedKeys:fe,treeCheckedKeys:Re,mergedSize:_,mergedDisabled:F,selectedOption:Pe,selectedOptions:Ie,pattern:a,pendingNodeKey:Se,mergedCascade:W,mergedFilter:m,selectionRenderTag:kt,handleTriggerOrMenuResize:Ye,doUpdateExpandedKeys:ve,handleMenuLeave:Ue,handleTriggerClick:De,handleMenuClickoutside:Ae,handleUpdateCheckedKeys:Ee,handleUpdateIndeterminateKeys:n,handleTriggerFocus:o,handleTriggerBlur:f,handleMenuFocusin:S,handleMenuFocusout:K,handleClear:D,handleDeleteOption:X,handlePatternInput:ne,handleKeydown:ge,handleTabOut:be,handleMenuMousedown:yt,mergedTheme:Le,cssVars:w?void 0:et,themeClass:ue==null?void 0:ue.themeClass,onRender:ue==null?void 0:ue.onRender})},render(){const{mergedTheme:e,mergedClsPrefix:s,$slots:h}=this;return p("div",{class:`${s}-tree-select`},p(qt,null,{default:()=>[p(Wt,null,{default:()=>p(_t,{ref:"triggerInstRef",onResize:this.handleTriggerOrMenuResize,status:this.mergedStatus,focused:this.focused,clsPrefix:s,theme:e.peers.InternalSelection,themeOverrides:e.peerOverrides.InternalSelection,renderTag:this.selectionRenderTag,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,size:this.mergedSize,bordered:this.bordered,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,active:this.mergedShow,loading:this.loading,multiple:this.multiple,maxTagCount:this.maxTagCount,showArrow:!0,filterable:this.filterable,clearable:this.clearable,pattern:this.pattern,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onDeleteOption:this.handleDeleteOption,onKeydown:this.handleKeydown},{arrow:()=>{var v,d;return[(d=(v=this.$slots).arrow)===null||d===void 0?void 0:d.call(v)]}})}),p(Gt,{ref:"followerInstRef",show:this.mergedShow,placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Je.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target"},{default:()=>p(Jt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>{var v;if(!this.mergedShow)return null;const{mergedClsPrefix:d,checkable:g,multiple:C,menuProps:w,options:T}=this;return(v=this.onRender)===null||v===void 0||v.call(this),ke(p("div",Object.assign({},w,{class:[`${d}-tree-select-menu`,w==null?void 0:w.class,this.themeClass],ref:"menuElRef",style:[(w==null?void 0:w.style)||"",this.cssVars],tabindex:0,onMousedown:this.handleMenuMousedown,onKeydown:this.handleKeydown,onFocusin:this.handleMenuFocusin,onFocusout:this.handleMenuFocusout}),p(fn,{ref:"treeInstRef",blockLine:!0,allowCheckingNotLoaded:this.allowCheckingNotLoaded,showIrrelevantNodes:!1,animated:!1,pattern:this.pattern,filter:this.mergedFilter,data:T,cancelable:C,labelField:this.labelField,keyField:this.keyField,disabledField:this.disabledField,childrenField:this.childrenField,theme:e.peers.Tree,themeOverrides:e.peerOverrides.Tree,defaultExpandAll:this.defaultExpandAll,defaultExpandedKeys:this.defaultExpandedKeys,expandedKeys:this.mergedExpandedKeys,checkedKeys:this.treeCheckedKeys,selectedKeys:this.treeSelectedKeys,checkable:g,checkStrategy:this.checkStrategy,cascade:this.mergedCascade,leafOnly:this.leafOnly,multiple:this.multiple,renderLabel:this.renderLabel,renderPrefix:this.renderPrefix,renderSuffix:this.renderSuffix,renderSwitcherIcon:this.renderSwitcherIcon,nodeProps:this.nodeProps,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,internalTreeSelect:!0,internalUnifySelectCheck:!0,internalScrollable:!0,internalScrollablePadding:this.menuPadding,internalFocusable:!1,internalCheckboxFocusable:!1,internalRenderEmpty:()=>p("div",{class:`${d}-tree-select-menu__empty`},Ge(h.empty,()=>[p(Ft,{theme:e.peers.Empty,themeOverrides:e.peerOverrides.Empty})])),onLoad:this.onLoad,onUpdateCheckedKeys:this.handleUpdateCheckedKeys,onUpdateIndeterminateKeys:this.handleUpdateIndeterminateKeys,onUpdateExpandedKeys:this.doUpdateExpandedKeys}),We(h.action,_=>_?p("div",{class:`${d}-tree-select-menu__action`,"data-action":!0},_):null),p(Nt,{onFocus:this.handleTabOut})),[[Xt,this.handleMenuClickoutside,void 0,{capture:!0}]])}})})]}))}}),ct=["mdi-air-humidifier-off","mdi-chili-off","mdi-cigar-off","mdi-clock-time-eight","mdi-clock-time-eight-outline","mdi-clock-time-eleven","mdi-clock-time-eleven-outline","mdi-clock-time-five","mdi-clock-time-five-outline","mdi-clock-time-four","mdi-clock-time-four-outline","mdi-clock-time-nine","mdi-clock-time-nine-outline","mdi-clock-time-one","mdi-clock-time-one-outline","mdi-clock-time-seven","mdi-clock-time-seven-outline","mdi-clock-time-six","mdi-clock-time-six-outline","mdi-clock-time-ten","mdi-clock-time-ten-outline","mdi-clock-time-three","mdi-clock-time-three-outline","mdi-clock-time-twelve","mdi-clock-time-twelve-outline","mdi-clock-time-two","mdi-clock-time-two-outline","mdi-cog-refresh","mdi-cog-refresh-outline","mdi-cog-sync","mdi-cog-sync-outline","mdi-content-save-cog","mdi-content-save-cog-outline","mdi-cosine-wave","mdi-cube-off","mdi-cube-off-outline","mdi-dome-light","mdi-download-box","mdi-download-box-outline","mdi-download-circle","mdi-download-circle-outline","mdi-fan-alert","mdi-fan-chevron-down","mdi-fan-chevron-up","mdi-fan-minus","mdi-fan-plus","mdi-fan-remove","mdi-fan-speed-1","mdi-fan-speed-2","mdi-fan-speed-3","mdi-food-drumstick","mdi-food-drumstick-off","mdi-food-drumstick-off-outline","mdi-food-drumstick-outline","mdi-food-steak","mdi-food-steak-off","mdi-fuse-alert","mdi-fuse-off","mdi-heart-minus","mdi-heart-minus-outline","mdi-heart-off-outline","mdi-heart-plus","mdi-heart-plus-outline","mdi-heart-remove","mdi-heart-remove-outline","mdi-hours-24","mdi-incognito-circle","mdi-incognito-circle-off","mdi-lingerie","mdi-microwave-off","mdi-minus-circle-off","mdi-minus-circle-off-outline","mdi-motion-sensor-off","mdi-pail-minus","mdi-pail-minus-outline","mdi-pail-off","mdi-pail-off-outline","mdi-pail-outline","mdi-pail-plus","mdi-pail-plus-outline","mdi-pail-remove","mdi-pail-remove-outline","mdi-pine-tree-fire","mdi-power-plug-off-outline","mdi-power-plug-outline","mdi-printer-eye","mdi-printer-search","mdi-puzzle-check","mdi-puzzle-check-outline","mdi-rug","mdi-sawtooth-wave","mdi-set-square","mdi-smoking-pipe-off","mdi-spoon-sugar","mdi-square-wave","mdi-table-split-cell","mdi-ticket-percent-outline","mdi-triangle-wave","mdi-waveform","mdi-wizard-hat","mdi-ab-testing","mdi-abjad-arabic","mdi-abjad-hebrew","mdi-abugida-devanagari","mdi-abugida-thai","mdi-access-point","mdi-access-point-network","mdi-access-point-network-off","mdi-account","mdi-account-alert","mdi-account-alert-outline","mdi-account-arrow-left","mdi-account-arrow-left-outline","mdi-account-arrow-right","mdi-account-arrow-right-outline","mdi-account-box","mdi-account-box-multiple","mdi-account-box-multiple-outline","mdi-account-box-outline","mdi-account-cancel","mdi-account-cancel-outline","mdi-account-cash","mdi-account-cash-outline","mdi-account-check","mdi-account-check-outline","mdi-account-child","mdi-account-child-circle","mdi-account-child-outline","mdi-account-circle","mdi-account-circle-outline","mdi-account-clock","mdi-account-clock-outline","mdi-account-cog","mdi-account-cog-outline","mdi-account-convert","mdi-account-convert-outline","mdi-account-cowboy-hat","mdi-account-details","mdi-account-details-outline","mdi-account-edit","mdi-account-edit-outline","mdi-account-group","mdi-account-group-outline","mdi-account-hard-hat","mdi-account-heart","mdi-account-heart-outline","mdi-account-key","mdi-account-key-outline","mdi-account-lock","mdi-account-lock-outline","mdi-account-minus","mdi-account-minus-outline","mdi-account-multiple","mdi-account-multiple-check","mdi-account-multiple-check-outline","mdi-account-multiple-minus","mdi-account-multiple-minus-outline","mdi-account-multiple-outline","mdi-account-multiple-plus","mdi-account-multiple-plus-outline","mdi-account-multiple-remove","mdi-account-multiple-remove-outline","mdi-account-music","mdi-account-music-outline","mdi-account-network","mdi-account-network-outline","mdi-account-off","mdi-account-off-outline","mdi-account-outline","mdi-account-plus","mdi-account-plus-outline","mdi-account-question","mdi-account-question-outline","mdi-account-remove","mdi-account-remove-outline","mdi-account-search","mdi-account-search-outline","mdi-account-settings","mdi-account-settings-outline","mdi-account-star","mdi-account-star-outline","mdi-account-supervisor","mdi-account-supervisor-circle","mdi-account-supervisor-outline","mdi-account-switch","mdi-account-switch-outline","mdi-account-tie","mdi-account-tie-outline","mdi-account-tie-voice","mdi-account-tie-voice-off","mdi-account-tie-voice-off-outline","mdi-account-tie-voice-outline","mdi-account-voice","mdi-adjust","mdi-adobe","mdi-adobe-acrobat","mdi-air-conditioner","mdi-air-filter","mdi-air-horn","mdi-air-humidifier","mdi-air-purifier","mdi-airbag","mdi-airballoon","mdi-airballoon-outline","mdi-airplane","mdi-airplane-landing","mdi-airplane-off","mdi-airplane-takeoff","mdi-airport","mdi-alarm","mdi-alarm-bell","mdi-alarm-check","mdi-alarm-light","mdi-alarm-light-outline","mdi-alarm-multiple","mdi-alarm-note","mdi-alarm-note-off","mdi-alarm-off","mdi-alarm-plus","mdi-alarm-snooze","mdi-album","mdi-alert","mdi-alert-box","mdi-alert-box-outline","mdi-alert-circle","mdi-alert-circle-check","mdi-alert-circle-check-outline","mdi-alert-circle-outline"],Mn={class:"w-full"},Bn=gt("span",{class:"i-mdi:magnify text-18"},null,-1),On=gt("a",{class:"text-blue",target:"_blank",href:"https://icones.js.org/collection/all"}," Icones ",-1),Pn={key:0,class:"h-150 w-300 overflow-y-scroll"},Kn=["onClick"],Un={key:1},An={__name:"IconPicker",props:{value:String},emits:["update:value"],setup(e,{emit:s}){const v=x(e.value),d=x(ct);function g(){d.value=ct.filter(w=>w.includes(v.value))}function C(w){v.value=w,s("update:value",v.value)}return en(v,()=>{g(),s("update:value",v.value)},{debounce:200}),(w,T)=>(Q(),ye("div",Mn,[k(l(an),{trigger:"click",placement:"bottom-start"},{trigger:I(()=>[k(l(se),{value:v.value,"onUpdate:value":[T[0]||(T[0]=_=>v.value=_),g],placeholder:"请输入图标名称"},{prefix:I(()=>[Bn]),suffix:I(()=>[k(we,{icon:v.value,size:18},null,8,["icon"])]),_:1},8,["value"])]),footer:I(()=>[Xe(" 更多图标去 "),On,Xe(" 查看 ")]),default:I(()=>[d.value.length?(Q(),ye("ul",Pn,[(Q(!0),ye(tn,null,nn(d.value,(_,F)=>(Q(),ye("li",{key:F,class:"mx-5 inline-block cursor-pointer hover:text-cyan",onClick:Y=>C(_)},[k(we,{icon:_,size:18},null,8,["icon"])],8,Kn))),128))])):(Q(),ye("div",Un,[k(we,{icon:v.value,size:18},null,8,["icon"])]))]),_:1})]))}},Xn=Object.assign({name:"菜单管理"},{__name:"index",setup(e){const s=x(null),h=x({}),v=ln("permission"),d=x(!1),g={order:1,keepalive:!0},{modalVisible:C,modalTitle:w,modalLoading:T,handleAdd:_,handleDelete:F,handleEdit:Y,handleSave:le,modalForm:b,modalFormRef:ce}=Rt({name:"菜单",initForm:g,doCreate:ae.createMenu,doDelete:ae.deleteMenu,doUpdate:ae.updateMenu,refresh:()=>{var a;return(a=s.value)==null?void 0:a.handleSearch()}});on(()=>{var a;(a=s.value)==null||a.handleSearch(),B()});const N=x(!1),M=x([]),Z=[{title:"ID",key:"id",width:50,ellipsis:{tooltip:!0}},{title:"菜单名称",key:"name",width:80,ellipsis:{tooltip:!0}},{title:"图标",key:"icon",width:30,render(a){return p(we,{icon:a.icon,size:20})}},{title:"排序",key:"order",width:30,ellipsis:{tooltip:!0}},{title:"访问路径",key:"path",width:60,ellipsis:{tooltip:!0}},{title:"跳转路径",key:"redirect",width:60,ellipsis:{tooltip:!0}},{title:"组件路径",key:"component",width:60,ellipsis:{tooltip:!0}},{title:"保活",key:"keepalive",width:40,render(a){return p(Fe,{size:"small",rubberBand:!1,value:a.keepalive,onUpdateValue:()=>U(a)})}},{title:"隐藏",key:"is_hidden",width:40,render(a){return p(Fe,{size:"small",rubberBand:!1,value:a.is_hidden,onUpdateValue:()=>oe(a)})}},{title:"创建日期",key:"created_at",width:70,render(a){return p("span",un(a.created_at))}},{title:"操作",key:"actions",width:80,align:"center",fixed:"right",render(a){return[ke(p(_e,{size:"tiny",quaternary:!0,type:"primary",style:`display: ${a.children?"":"none"};`,onClick:()=>{g.parent_id=a.id,g.menu_type="menu",N.value=!1,d.value=!1,_()}},{default:()=>"子菜单",icon:je("material-symbols:add",{size:16})}),[[v,"post/api/v1/menu/create"]]),ke(p(_e,{size:"tiny",quaternary:!0,type:"info",onClick:()=>{N.value=!1,Y(a)}},{default:()=>"编辑",icon:je("material-symbols:edit-outline",{size:16})}),[[v,"post/api/v1/menu/update"]]),p(Ct,{onPositiveClick:()=>F({id:a.id},!1)},{trigger:()=>ke(p(_e,{size:"tiny",quaternary:!0,type:"error",style:`display: ${a.children&&a.children.length>0?"none":""};`},{default:()=>"删除",icon:je("material-symbols:delete-outline",{size:16})}),[[v,"delete/api/v1/menu/delete"]]),default:()=>p("div",{},"确定删除该菜单吗?")})]}}];function U(a){return Te(this,null,function*(){a.id&&(a.publishing=!0,a.keepalive=a.keepalive===!1,yield ae.updateMenu(a),a.publishing=!1,$message==null||$message.success(a.keepalive?"已开启":"已关闭"))})}function oe(a){return Te(this,null,function*(){a.id&&(a.publishing=!0,a.is_hidden=a.is_hidden===!1,yield ae.updateMenu(a),a.publishing=!1,$message==null||$message.success(a.is_hidden?"已隐藏":"已取消隐藏"))})}function q(){g.parent_id=0,g.menu_type="catalog",g.is_hidden=!1,g.order=1,g.keepalive=!0,N.value=!0,d.value=!0,_()}function B(){return Te(this,null,function*(){const{data:a}=yield ae.getMenus(),m={id:0,name:"根目录",children:[]};m.children=a,M.value=[m]})}return(a,m)=>(Q(),$e(St,{"show-footer":"",title:"菜单列表"},{action:I(()=>[ke((Q(),$e(l(_e),{type:"primary",onClick:q},{default:I(()=>[k(we,{icon:"material-symbols:add",size:18,class:"mr-5"}),Xe("新建根菜单 ")]),_:1})),[[l(v),"post/api/v1/menu/create"]])]),default:I(()=>[k(Vt,{ref_key:"$table",ref:s,"query-items":h.value,"onUpdate:queryItems":m[0]||(m[0]=r=>h.value=r),"is-pagination":!1,columns:Z,"get-data":l(ae).getMenus,"single-line":!0},null,8,["query-items","get-data"]),k(It,{visible:l(C),"onUpdate:visible":m[10]||(m[10]=r=>rn(C)?C.value=r:null),title:l(w),loading:l(T),onSave:m[11]||(m[11]=r=>l(le)(B))},{default:I(()=>[k(l(pn),{ref_key:"modalFormRef",ref:ce,"label-placement":"left","label-align":"left","label-width":80,model:l(b)},{default:I(()=>[k(l(H),{label:"上级菜单",path:"parent_id"},{default:I(()=>[k(l(Vn),{value:l(b).parent_id,"onUpdate:value":m[1]||(m[1]=r=>l(b).parent_id=r),"key-field":"id","label-field":"name",options:M.value,"default-expand-all":"true",disabled:d.value},null,8,["value","options","disabled"])]),_:1}),k(l(H),{label:"菜单名称",path:"name",rule:{required:!0,message:"请输入唯一菜单名称",trigger:["input","blur"]}},{default:I(()=>[k(l(se),{value:l(b).name,"onUpdate:value":m[2]||(m[2]=r=>l(b).name=r),placeholder:"请输入唯一菜单名称"},null,8,["value"])]),_:1}),k(l(H),{label:"访问路径",path:"path",rule:{required:!0,message:"请输入访问路径",trigger:["blur"]}},{default:I(()=>[k(l(se),{value:l(b).path,"onUpdate:value":m[3]||(m[3]=r=>l(b).path=r),placeholder:"请输入访问路径"},null,8,["value"])]),_:1}),l(b).menu_type==="menu"?(Q(),$e(l(H),{key:0,label:"组件路径",path:"component"},{default:I(()=>[k(l(se),{value:l(b).component,"onUpdate:value":m[4]||(m[4]=r=>l(b).component=r),placeholder:"请输入组件路径，例如：/system/user"},null,8,["value"])]),_:1})):dn("",!0),k(l(H),{label:"跳转路径",path:"redirect"},{default:I(()=>[k(l(se),{value:l(b).redirect,"onUpdate:value":m[5]||(m[5]=r=>l(b).redirect=r),disabled:l(b).parent_id!==0,placeholder:l(b).parent_id!==0?"只有一级菜单可以设置跳转路径":"请输入跳转路径"},null,8,["value","disabled","placeholder"])]),_:1}),k(l(H),{label:"菜单图标",path:"icon"},{default:I(()=>[k(An,{value:l(b).icon,"onUpdate:value":m[6]||(m[6]=r=>l(b).icon=r)},null,8,["value"])]),_:1}),k(l(H),{label:"显示排序",path:"order"},{default:I(()=>[k(l(_n),{value:l(b).order,"onUpdate:value":m[7]||(m[7]=r=>l(b).order=r),min:1},null,8,["value"])]),_:1}),k(l(H),{label:"是否隐藏",path:"is_hidden"},{default:I(()=>[k(l(Fe),{value:l(b).is_hidden,"onUpdate:value":m[8]||(m[8]=r=>l(b).is_hidden=r)},null,8,["value"])]),_:1}),k(l(H),{label:"KeepAlive",path:"keepalive"},{default:I(()=>[k(l(Fe),{value:l(b).keepalive,"onUpdate:value":m[9]||(m[9]=r=>l(b).keepalive=r)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading"])]),_:1}))}});export{Xn as default};
